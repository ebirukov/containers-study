# üìö –ö—É—Ä—Å: ¬´–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è. –ü–∏—à–µ–º —Å–≤–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–π —Ä–∞–Ω—Ç–∞–π–º –Ω–∞ Go¬ª

* –£—á–∞—Å—Ç–Ω–∏–∫–∏ —Å–æ–∑–¥–∞—é—Ç **—Å–≤–æ–π –º–∏–Ω–∏-Docker –Ω–∞ Go** —Å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π –∏–∑–æ–ª—è—Ü–∏–µ–π: PID, UTS, Mount, User, Network namespaces + cgroups + —É—Ä–µ–∑–∞–Ω–Ω—ã–µ capabilities.
* –ö–∞–∂–¥–æ–µ –∑–∞–Ω—è—Ç–∏–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–µ–π, –∫–æ–¥–æ–º, –¥–æ–º–∞—à–∫–æ–π.
* –í –∫–∞–∂–¥–æ–º —É—Ä–æ–∫–µ –æ–±—ä—è—Å–Ω—è—é—Ç—Å—è *–ø—Ä–∏–º–µ—Ä—ã –≤–æ–∑–º–æ–∂–Ω—ã—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤ –∞—Ç–∞–∫* –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞ –∏–∑–æ–ª—è—Ü–∏–∏.

---

## **–£—Ä–æ–∫ 1. –í–≤–µ–¥–µ–Ω–∏–µ –∏ –ø–µ—Ä–≤—ã–π –ø—Ä–æ—Ç–æ—Ç–∏–ø**

* **–¢–µ–æ—Ä–∏—è:** –∑–∞—á–µ–º –Ω—É–∂–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è. –û—Ç–ª–∏—á–∏–µ –æ—Ç –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏. –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã: namespaces, cgroups, rootfs.
* **–ü—Ä–∞–∫—Ç–∏–∫–∞:** –∑–∞–ø—É—Å–∫–∞–µ–º –æ–±—ã—á–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –∏–∑—É—á–∞–µ–º –µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (`/proc`, PID, rootfs).
* **Go-–∫–æ–¥:** —Å–æ–∑–¥–∞—ë–º –∫–∞—Ä–∫–∞—Å CLI-—É—Ç–∏–ª–∏—Ç—ã `mydocker run <cmd>` (–ø–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ `exec.Command`).
* **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–ø—Ä–∏–º–µ—Ä –≤–µ–∫—Ç–æ—Ä–∞ –∞—Ç–∞–∫–∏):** –±–µ–∑ –∏–∑–æ–ª—è—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ—Ü–µ—Å—Å –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ–¥ –∫–æ—Ç–æ—Ä—ã–º –æ–Ω –∑–∞–ø—É—â–µ–Ω.

üíª **–î–æ–º–∞—à–∫–∞:**

* —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `ps` (—Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ —É—Ç–∏–ª–∏—Ç–µ);
* —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ—Å—Ç–µ–π—à–∏–π ¬´—Å—Ç–æ—Ä¬ª ‚Äî —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏–Ω—Ñ–æ –æ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö (–ø–æ–∫–∞ –±–µ–∑ rootfs).

---

## **–£—Ä–æ–∫ 2. Namespaces: –∏–∑–æ–ª—è—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤**

* **–¢–µ–æ—Ä–∏—è:** PID –∏ UTS namespaces.
* **–ü—Ä–∞–∫—Ç–∏–∫–∞:** `unshare -p -f -u /bin/bash`, –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ `ps`, `lsns`.
* **Go-–∫–æ–¥:** –∑–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ —á–µ—Ä–µ–∑ `syscall.Clone` –≤ –Ω–æ–≤–æ–º PID/UTS namespace.
* **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–ø—Ä–∏–º–µ—Ä –≤–µ–∫—Ç–æ—Ä–∞ –∞—Ç–∞–∫–∏):** –±–µ–∑ PID namespace –ø—Ä–æ—Ü–µ—Å—Å –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å —á—É–∂–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ ‚Üí —Ä–∏—Å–∫ DoS –∏–ª–∏ –∏–Ω–∂–µ–∫—Ç–æ–≤ –≤ —á—É–∂–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã.

üíª **–î–æ–º–∞—à–∫–∞:**

* `mydocker ps` –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ PID –≤–Ω—É—Ç—Ä–∏ –∏ —Å–Ω–∞—Ä—É–∂–∏.

---

## **–£—Ä–æ–∫ 3. –§–∞–π–ª–æ–≤–∞—è –∏–∑–æ–ª—è—Ü–∏—è**

* **–¢–µ–æ—Ä–∏—è:** mount namespace, chroot, pivot\_root.
* **–ü—Ä–∞–∫—Ç–∏–∫–∞:** —Å–æ–∑–¥–∞—ë–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π rootfs (busybox/alpine) –∏ –∑–∞–ø—É—Å–∫–∞–µ–º —á–µ—Ä–µ–∑ `chroot`.
* **Go-–∫–æ–¥:** mount namespace + `pivot_root`, –∑–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ.
* **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–ø—Ä–∏–º–µ—Ä –≤–µ–∫—Ç–æ—Ä–∞ –∞—Ç–∞–∫–∏):** –±–µ–∑ —Ñ–∞–π–ª–æ–≤–æ–π –∏–∑–æ–ª—è—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å –∏–ª–∏ –º–µ–Ω—è—Ç—å —Ñ–∞–π–ª—ã –Ω–∞ —Ö–æ—Å—Ç–µ.

üíª **–î–æ–º–∞—à–∫–∞:**

* –¥–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ `--rootfs <path>` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º rootfs.

---

## **–£—Ä–æ–∫ 4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏: Cgroups**

* **–¢–µ–æ—Ä–∏—è:** cgroups v2: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è CPU, –ø–∞–º—è—Ç–∏, —á–∏—Å–ª–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.
* **–ü—Ä–∞–∫—Ç–∏–∫–∞:** –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –≤—Ä—É—á–Ω—É—é `echo 50M > memory.max`, –ø—Ä–æ–≤–µ—Ä—è–µ–º OOM.
* **Go-–∫–æ–¥:** –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–æ–∑–¥–∞—ë–º cgroup –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ª–∏–º–∏—Ç—ã.
* **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–ø—Ä–∏–º–µ—Ä –≤–µ–∫—Ç–æ—Ä–∞ –∞—Ç–∞–∫–∏):** –±–µ–∑ cgroups –ø—Ä–æ—Ü–µ—Å—Å –º–æ–∂–µ—Ç ¬´—Å—ä–µ—Å—Ç—å¬ª –≤—Å—é –ø–∞–º—è—Ç—å/CPU ‚Üí –æ—Ç–∫–∞–∑ –≤ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–∏.

üíª **–î–æ–º–∞—à–∫–∞:**

* —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CLI-—Ñ–ª–∞–≥–∏ `--memory`, `--cpu`.

---

## **–£—Ä–æ–∫ 5. User namespaces: –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π**

* **–¢–µ–æ—Ä–∏—è:** user namespace, –º–∞–ø–ø–∏–Ω–≥ UID/GID, –∏–∑–æ–ª—è—Ü–∏—è root –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
* **–ü—Ä–∞–∫—Ç–∏–∫–∞:** `unshare -U -r /bin/bash`, –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ —á–µ—Ä–µ–∑ `id`, `capsh --print`.
* **Go-–∫–æ–¥:** —Å–æ–∑–¥–∞—ë–º user namespace –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∑–∞–¥–∞—ë–º –º–∞–ø–ø–∏–Ω–≥ uid/gid.
* **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–ø—Ä–∏–º–µ—Ä –≤–µ–∫—Ç–æ—Ä–∞ –∞—Ç–∞–∫–∏):** –±–µ–∑ user namespaces root –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ = root –Ω–∞ —Ö–æ—Å—Ç–µ, —á—Ç–æ –¥–∞—ë—Ç –æ–≥—Ä–æ–º–Ω—É—é –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å –∞—Ç–∞–∫.

üíª **–î–æ–º–∞—à–∫–∞:**

* —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–ª–∞–≥ `--uid-map` –∏ `--gid-map` –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

---

## **–£—Ä–æ–∫ 6. Capabilities –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤ Linux**

* **–¢–µ–æ—Ä–∏—è:** —á—Ç–æ —Ç–∞–∫–æ–µ capabilities, –∫–∞–∫ Linux –¥–µ–ª–∏—Ç root-–ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏.
* **–ü—Ä–∞–∫—Ç–∏–∫–∞:** `capsh --print`, –∑–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å —É—Ä–µ–∑–∞–Ω–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º cap.
* **Go-–∫–æ–¥:** —É–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ capabilities –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
* **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–ø—Ä–∏–º–µ—Ä –≤–µ–∫—Ç–æ—Ä–∞ –∞—Ç–∞–∫–∏):** –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä capabilities –¥–∞—ë—Ç –¥–æ—Å—Ç—É–ø –∫ kernel-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º –¥–∞–∂–µ –ø—Ä–∏ user namespaces.

üíª **–î–æ–º–∞—à–∫–∞:**

* —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–ª–∞–≥ `--drop-cap` –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –ª–∏—à–Ω–∏—Ö –ø—Ä–∞–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —É–±—Ä–∞—Ç—å.

---

## **–£—Ä–æ–∫ 7. –°–µ—Ç—å: –∏–∑–æ–ª—è—Ü–∏—è –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**

* **–¢–µ–æ—Ä–∏—è:** network namespaces, veth-–ø–∞—Ä—ã, bridge (–∞–Ω–∞–ª–æ–≥ docker0).
* **–ü—Ä–∞–∫—Ç–∏–∫–∞:** –≤—Ä—É—á–Ω—É—é —Å–æ–∑–¥–∞—ë–º `ip netns add`, `ip link add veth0 type veth peer name veth1`.
* **Go-–∫–æ–¥:** –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–æ–∑–¥–∞—ë–º veth-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –ø–æ–¥–∫–ª—é—á–∞–µ–º –∫ bridge –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º IP.
* **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–ø—Ä–∏–º–µ—Ä –≤–µ–∫—Ç–æ—Ä–∞ –∞—Ç–∞–∫–∏):** –±–µ–∑ network namespace –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–∂–µ—Ç —Å–ª—É—à–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫ –∏ –ø–æ–¥—Å–ª—É—à–∏–≤–∞—Ç—å/–ø–æ–¥–º–µ–Ω—è—Ç—å –ø–∞–∫–µ—Ç—ã ‚Üí MITM –≤–Ω—É—Ç—Ä–∏ —Ö–æ—Å—Ç–∞.

üíª **–î–æ–º–∞—à–∫–∞:**

* —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `exec <id> <cmd>` –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å–µ—Ç–∏ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

